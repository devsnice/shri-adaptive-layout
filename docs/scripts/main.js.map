{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/header/header.js","webpack:///./src/components/videocontrol/audioAnalyse.js","webpack:///./src/components/videocontrol/canvasVideo.js","webpack:///./src/components/videocontrol/player.js","webpack:///./src/components/videocontrol/videocontrol.js","webpack:///./src/components/videocontrol/webglVideo.js","webpack:///./src/components/widget/camera.widget.js","webpack:///./src/components/widget/player.widget.js","webpack:///./src/components/widget/questions.widget.js","webpack:///./src/components/widget/stats.widget.js","webpack:///./src/components/widget/themal.widget.js","webpack:///./src/components/widget/widget.js","webpack:///./src/layout/layout.js","webpack:///./src/pages/index.js","webpack:///./src/pages/index.page.js","webpack:///./src/pages/videocontrol.page.js"],"names":["domUtils","doesNodeContainClick","node","e","contains","target","Navigation","constructor","selector","menuOpened","headerMenu","document","querySelector","headerBurgerMenu","isMobile","initNavigation","maxMobileWidth","window","innerWidth","classList","add","addEventListener","openNavigation","closeNavigation","remove","AudioContext","webkitAudioContext","context","Analyse","video","noiseLevelRange","createScriptProcessor","analyser","createAnalyser","bufferLength","frequencyBinCount","bands","Uint8Array","startShow","source","createMediaElementSource","connect","destination","onaudioprocess","getByteFrequencyData","show","getAverageVolume","array","values","i","length","average","requestAnimationFrame","value","CanvasVideo","videoPlayer","stopVideo","canvas","canvasHelper","applyBrightness","data","brightness","applyContrast","contrast","factor","truncateColor","filter","width","height","createElement","contextHelper","getContext","drawImage","idata","getImageData","play","canvasInited","size","style","appendChild","draw","filteredImage","putImageData","paused","ended","PlayerTemplate","template","getElementById","render","id","element","content","cloneNode","setAttribute","Player","url","containerElement","playerElement","settings","webglInited","containerBounds","videoSettings","isFullscreen","player","brightnessRange","contrastRange","webglVideo","canvasVideo","initPromise","init","initEvents","setContainerBounds","getBoundingClientRect","Promise","resolve","reject","Hls","isSupported","hls","loadSource","attachMedia","on","Events","MANIFEST_PARSED","canPlayType","src","stop","pause","openFullscreen","muted","playerBounds","transform","transitionProperty","transitionDuration","zIndex","left","top","closeFullscreen","playVideoOnWebgl","playVideoOnCanvas","changeBrightness","changeContrast","event","callback","Videocontrol","broadcasts","elementShowAll","state","fullscreenId","initPlayers","closeFullPlayer","forEach","broadcast","openFullPlayer","index","VideoTemplate","listVideoElement","VideoPlayer","then","catch","err","console","WebglVideo","calculateBrightness","gl","viewport","drawingBufferWidth","drawingBufferHeight","clearColor","clear","COLOR_BUFFER_BIT","vertShaderSource","fragShaderSource","vertShader","createShader","VERTEX_SHADER","fragShader","FRAGMENT_SHADER","shaderSource","compileShader","program","createProgram","attachShader","linkProgram","useProgram","vertices","Float32Array","vertexBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","positionLocation","getAttribLocation","vertexAttribPointer","FLOAT","enableVertexAttribArray","texture","createTexture","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","drawArrays","TRIANGLES","CameraWidget","PlayerWidget","widget","setInnerText","text","block","innerText","setCover","albumcover","artist","track","name","volume","QuestionsWidget","buttons","StatsWidget","ThemalWidget","temperature","humidity","WIDGET_TYPES","STATS","CAMERA","THERMAL","PLAYER","QUESTIONS","DEFAULT","Widget","container","setDescription","description","setHeaderData","title","time","icon","getDataTemplateType","type","renderDataTemplate","templateDataType","dataContentBlock","statsWidget","cameraWidget","playerWidget","questionsWidget","thermalWidget","ApplicationLayout","layout","unblock","Layout","InitApplication","currentPage","location","pathname","routing","page","headerNavigation","IndexPage","renderDashboardWidgets","events","dashboardWidgetsList","loadEvents","fetch","method","body","JSON","stringify","offset","limit","headers","response","json","result","alert","VideoControlPage","VideocontrolWidget"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/pages/index.js\");\n","const domUtils = {\n  doesNodeContainClick: (node, e) => {\n    if (!node || !e) return false;\n\n    if (node.contains(e.target)) return true;\n  }\n};\n\nexport default class Navigation {\n  constructor({ selector }) {\n    this.menuOpened = false;\n    this.headerMenu = document.querySelector(selector);\n    this.headerBurgerMenu = document.querySelector(\"#header-burger\");\n\n    if (this.isMobile()) {\n      this.initNavigation();\n    }\n  }\n\n  isMobile() {\n    const maxMobileWidth = 768;\n\n    return window.innerWidth < maxMobileWidth;\n  }\n\n  initNavigation() {\n    this.headerMenu.classList.add(\"header-menu-list_state-mobile\");\n\n    this.headerBurgerMenu.addEventListener(\"click\", () => {\n      if (!this.menuOpened) {\n        this.openNavigation();\n      } else {\n        this.closeNavigation();\n      }\n    });\n  }\n\n  openNavigation() {\n    this.headerMenu.classList.add(\"header-menu-list_state-mobile-opened\");\n\n    this.menuOpened = true;\n  }\n\n  closeNavigation() {\n    this.headerMenu.classList.remove(\"header-menu-list_state-mobile-opened\");\n\n    this.menuOpened = false;\n  }\n}\n","const AudioContext = window.AudioContext || window.webkitAudioContext;\n\nconst context = new AudioContext();\n\nclass Analyse {\n  constructor({ video, noiseLevelRange }) {\n    this.node = context.createScriptProcessor(2048, 1, 1);\n    this.noiseLevelRange = noiseLevelRange;\n\n    this.analyser = context.createAnalyser();\n\n    this.bufferLength = this.analyser.frequencyBinCount;\n    this.bands = new Uint8Array(this.bufferLength);\n\n    this.startShow = false;\n\n    video.addEventListener(\"canplay\", () => {\n      if (!this.source) {\n        this.source = context.createMediaElementSource(video);\n\n        this.source.connect(this.analyser);\n        this.analyser.connect(this.node);\n        this.node.connect(context.destination);\n        this.source.connect(context.destination);\n\n        this.node.onaudioprocess = e => {\n          this.analyser.getByteFrequencyData(this.bands); // copy current data to this.bands\n\n          if (!this.startShow) {\n            this.show();\n            this.startShow = true;\n          }\n        };\n      }\n    });\n  }\n\n  getAverageVolume(array) {\n    let values = 0;\n\n    for (let i = 0; i < array.length; i++) {\n      values += array[i];\n    }\n\n    const average = values / array.length;\n\n    // calculate in 100% scale, 1% is 2.56\n    return average === 0 ? 0 : average / 2.56;\n  }\n\n  show() {\n    requestAnimationFrame(() => {\n      this.noiseLevelRange.value = this.getAverageVolume(this.bands);\n\n      this.show();\n    });\n  }\n}\n\nexport default Analyse;\n","class CanvasVideo {\n  constructor({ video, videoPlayer }) {\n    this.video = video;\n    this.videoPlayer = videoPlayer;\n    this.stopVideo = false;\n\n    this.canvas = null;\n    this.canvasHelper = null;\n  }\n\n  applyBrightness(data, brightness) {\n    for (let i = 0; i < data.length; i += 4) {\n      data[i] += 255 * (brightness / 100);\n      data[i + 1] += 255 * (brightness / 100);\n      data[i + 2] += 255 * (brightness / 100);\n    }\n  }\n\n  applyContrast(data, contrast) {\n    const factor = (259.0 * (contrast + 255.0)) / (255.0 * (259.0 - contrast));\n\n    for (let i = 0; i < data.length; i += 4) {\n      data[i] = this.truncateColor(factor * (data[i] - 128.0) + 128.0);\n      data[i + 1] = this.truncateColor(factor * (data[i + 1] - 128.0) + 128.0);\n      data[i + 2] = this.truncateColor(factor * (data[i + 2] - 128.0) + 128.0);\n    }\n  }\n\n  truncateColor(value) {\n    if (value < 0) {\n      value = 0;\n    } else if (value > 255) {\n      value = 255;\n    }\n\n    return value;\n  }\n\n  filter({ video, width, height, contrast, brightness }) {\n    if (!this.canvasHelper) {\n      this.canvasHelper = document.createElement(\"canvas\");\n\n      this.canvasHelper.width = width;\n      this.canvasHelper.height = height;\n    }\n\n    const contextHelper = this.canvasHelper.getContext(\"2d\");\n\n    contextHelper.drawImage(video, 0, 0, width, height);\n\n    const idata = contextHelper.getImageData(0, 0, width, height);\n\n    var data = idata.data;\n\n    this.applyBrightness(data, brightness);\n    this.applyContrast(data, contrast);\n\n    return idata;\n  }\n\n  play({ canvasInited, brightness, contrast, size: { width, height } }) {\n    if (!canvasInited) {\n      this.canvas = document.createElement(\"canvas\");\n\n      this.canvas.style.width = width;\n      this.canvas.style.height = height;\n\n      this.canvas.width = width;\n      this.canvas.height = height;\n\n      this.videoPlayer.appendChild(this.canvas);\n    } else {\n      this.stopVideo = true;\n    }\n\n    const context = this.canvas.getContext(\"2d\");\n\n    const draw = () => {\n      requestAnimationFrame(() => {\n        const filteredImage = this.filter({\n          video: this.video,\n          width,\n          height,\n          contrast,\n          brightness\n        });\n\n        context.putImageData(filteredImage, 0, 0);\n\n        if (this.stopVideo || this.video.paused || this.video.ended) {\n          this.stopVideo = false;\n\n          return false;\n        } else {\n          draw();\n        }\n      });\n    };\n\n    draw();\n  }\n}\n\nexport default CanvasVideo;\n","import WebglVideo from \"./webglVideo\";\nimport CanvasVideo from \"./canvasVideo\";\nimport Analyse from \"./audioAnalyse\";\n\n/**\n * PlayerTemplate - generate video-player from <template> tag\n */\nexport class PlayerTemplate {\n  constructor() {\n    this.template = document.getElementById(\"template-player\");\n  }\n\n  render(id) {\n    const element = this.template.content\n      .querySelector(\".videocontrol-list__item\")\n      .cloneNode(true);\n\n    // player-{id}\n    element.querySelector(\".vc-player\").setAttribute(\"id\", id);\n\n    // player-{id}-video\n    element.querySelector(\"video\").setAttribute(\"id\", `${id}-video`);\n\n    // player-{id}-webgl-video\n    element.querySelector(\"input\").setAttribute(\"id\", `${id}-webgl-video`);\n\n    return element;\n  }\n}\n\n/**\n * Player is a wrapper around html5 video element and HLS standart,\n * it has special behavior for our application.\n */\nexport class Player {\n  constructor({ url, containerElement, playerElement }) {\n    this.settings = {\n      url,\n      webglInited: false,\n      canvasInited: false,\n      containerBounds: null\n    };\n\n    this.videoSettings = {\n      brightness: 0,\n      contrast: 0,\n      isFullscreen: false\n    };\n\n    this.containerElement = containerElement;\n    this.player = playerElement;\n    this.video = playerElement.querySelector(\"video\");\n    this.brightnessRange = playerElement.querySelector(\n      \".vc-player__brightness\"\n    );\n    this.noiseLevelRange = playerElement.querySelector(\n      \".vc-player__noise-level\"\n    );\n    this.contrastRange = playerElement.querySelector(\".vc-player__contrast\");\n\n    this.webglVideo = new WebglVideo({\n      video: this.video,\n      videoPlayer: this.player\n    });\n\n    this.canvasVideo = new CanvasVideo({\n      video: this.video,\n      videoPlayer: this.player\n    });\n\n    this.initPromise = null;\n\n    this.init();\n    this.initEvents();\n  }\n\n  setContainerBounds() {\n    if (!this.settings.containerBounds) {\n      this.settings.containerBounds = this.containerElement.getBoundingClientRect();\n    }\n\n    return this.settings.containerBounds;\n  }\n\n  init() {\n    if (this.initPromise) {\n      return this.initPromise;\n    }\n\n    this.initPromise = new Promise((resolve, reject) => {\n      if (Hls.isSupported()) {\n        const hls = new Hls();\n\n        hls.loadSource(this.settings.url);\n        hls.attachMedia(this.video);\n\n        hls.on(Hls.Events.MANIFEST_PARSED, () => {\n          resolve(this.video);\n        });\n      } else if (this.video.canPlayType(\"application/vnd.apple.mpegurl\")) {\n        this.video.src = this.settings.url;\n\n        this.video.addEventListener(\"loadedmetadata\", () => {\n          resolve(this.video);\n        });\n      }\n    });\n  }\n\n  play() {\n    this.video.play();\n  }\n\n  stop() {\n    this.video.pause();\n  }\n\n  openFullscreen() {\n    if (this.settings.isFullscreen) return false;\n\n    this.setContainerBounds();\n\n    const { containerBounds } = this.settings;\n\n    this.video.muted = false;\n\n    const playerBounds = this.player.getBoundingClientRect();\n\n    this.player.style.transform = `\n        translateX(0px)\n        translateY(0px)\n    `;\n\n    this.player.style.width = playerBounds.width + \"px\";\n    this.player.style.height = playerBounds.height + \"px\";\n    this.player.style.transitionProperty = \"\";\n    this.player.style.transitionDuration = \"\";\n    this.player.style.zIndex = \"2\";\n\n    window.requestAnimationFrame(() => {\n      this.player.style.transitionProperty = \"transform, width, height\";\n      this.player.style.transitionDuration = \"0.3s\";\n\n      // move element to top/left bounder of the list-container\n      this.player.style.transform = `\n        translateX(-${playerBounds.left - containerBounds.left}px)\n        translateY(-${playerBounds.top - containerBounds.top}px)\n      `;\n\n      this.player.style.width = containerBounds.width + \"px\";\n      this.player.style.height = containerBounds.height + \"px\";\n    });\n\n    this.settings.isFullscreen = true;\n  }\n\n  closeFullscreen() {\n    if (!this.settings.isFullscreen) return false;\n\n    this.video.muted = true;\n\n    this.player.style.zIndex = \"1\";\n\n    window.requestAnimationFrame(() => {\n      this.player.style.width = \"100%\";\n      this.player.style.height = \"100%\";\n\n      this.player.style.transform = `\n          translateX(0px)\n          translateY(0px)\n      `;\n    });\n\n    this.settings.isFullscreen = false;\n  }\n\n  playVideoOnWebgl() {\n    this.setContainerBounds();\n\n    if (!this.settings.webglInited) {\n      this.video.classList.add(\"vc-player__video_state-hidden\");\n    }\n\n    this.webglVideo.play({\n      brightness: this.videoSettings.brightness,\n      webglInited: this.settings.webglInited\n    });\n\n    this.settings.webglInited = true;\n  }\n\n  playVideoOnCanvas() {\n    this.setContainerBounds();\n\n    if (!this.settings.canvasInited) {\n      this.video.classList.add(\"vc-player__video_state-hidden\");\n    }\n\n    this.canvasVideo.play({\n      canvasInited: this.settings.canvasInited,\n      size: {\n        width: this.settings.containerBounds.width,\n        height: this.settings.containerBounds.height\n      },\n      brightness: this.videoSettings.brightness,\n      contrast: this.videoSettings.contrast\n    });\n\n    this.settings.canvasInited = true;\n  }\n\n  changeBrightness(value) {\n    this.videoSettings.brightness = value;\n\n    // turn on webgl instead of canvas\n    // this.playVideoOnWebgl();\n    this.playVideoOnCanvas();\n  }\n\n  changeContrast(value) {\n    this.videoSettings.contrast = value;\n\n    this.playVideoOnCanvas();\n  }\n\n  initEvents() {\n    this.brightnessRange.addEventListener(\"change\", e => {\n      this.changeBrightness(e.target.value);\n    });\n\n    this.contrastRange.addEventListener(\"change\", e => {\n      this.changeContrast(e.target.value);\n    });\n\n    this.analyser = new Analyse({\n      video: this.video,\n      noiseLevelRange: this.noiseLevelRange\n    });\n  }\n\n  addEventListener(event, callback) {\n    this.player.addEventListener(event, callback);\n  }\n}\n","import { PlayerTemplate, Player } from \"./player\";\n\n/**\n * Videocontrol represents controller over our feature,\n * it initializes broadcasts and interact with user's actions\n */\nclass Videocontrol {\n  constructor({ broadcasts, elementShowAll, element }) {\n    this.broadcasts = broadcasts;\n    this.element = element;\n    this.elementShowAll = elementShowAll;\n\n    this.state = {\n      fullscreenId: null\n    };\n\n    this.initPlayers();\n    this.initEvents();\n  }\n\n  closeFullPlayer() {\n    // play all players\n    this.broadcasts.forEach(broadcast => broadcast.player.play());\n\n    this.broadcasts[this.state.fullscreenId].player.closeFullscreen();\n\n    this.state.fullscreenId = null;\n  }\n\n  openFullPlayer(id) {\n    // stop all players except a fullscreen\n    this.broadcasts\n      .filter(broadcast => broadcast.id !== id)\n      .forEach(broadcast => broadcast.player.stop());\n\n    // open player in fullscreen\n    this.broadcasts[id].player.openFullscreen();\n\n    this.state.fullscreenId = id;\n  }\n\n  initEvents() {\n    this.elementShowAll.addEventListener(\"click\", () => {\n      this.closeFullPlayer();\n    });\n\n    this.elementShowAll.addEventListener(\"touchend\", () => {\n      this.closeFullPlayer();\n    });\n  }\n\n  initPlayers() {\n    this.broadcasts.forEach((broadcast, index) => {\n      const VideoTemplate = new PlayerTemplate();\n      const listVideoElement = VideoTemplate.render(`player-${index + 1}`);\n\n      this.element.appendChild(listVideoElement);\n\n      const VideoPlayer = new Player({\n        containerElement: this.element,\n        playerElement: listVideoElement.querySelector(\".vc-player\"),\n        url: broadcast.url\n      });\n\n      VideoPlayer.init()\n        .then(() => {\n          VideoPlayer.play();\n\n          // Init events\n          VideoPlayer.addEventListener(\"click\", e => {\n            this.openFullPlayer(index);\n          });\n\n          VideoPlayer.addEventListener(\"touchend\", e => {\n            this.openFullPlayer(index);\n          });\n\n          // Save player to broadcasts array\n          this.broadcasts[index].id = index;\n          this.broadcasts[index].player = VideoPlayer;\n        })\n        .catch(err => console.err(err));\n    });\n  }\n}\n\nexport default Videocontrol;\n","/**\n * It's my test solution of processing video with WebGL\n * https://www.youtube.com/watch?v=_ZQOUQsw_YI - interesting video about webgl\n * and yes, it works, but there's a problem with quality of video\n */\nclass WebglVideo {\n  constructor({ video, videoPlayer }) {\n    this.video = video;\n    this.videoPlayer = videoPlayer;\n    this.stopVideo = false;\n\n    this.canvas = null;\n  }\n\n  calculateBrightness(value) {\n    // от -0.5 до 0.5, 0 - картинка без изменений\n    return (value - 50) / 100;\n  }\n\n  play({ webglInited, brightness }) {\n    if (!webglInited) {\n      this.canvas = document.createElement(\"canvas\");\n\n      this.canvas.style.width = \"auto\";\n      this.canvas.style.height = \"100%\";\n\n      this.videoPlayer.appendChild(this.canvas);\n    } else {\n      this.stopVideo = true;\n    }\n\n    const gl = this.canvas.getContext(\"webgl\");\n\n    // Create new program using gsls\n    gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    gl.clearColor(255, 255, 255, 1.0);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    const vertShaderSource = `\n        attribute vec2 position;\n        varying vec2 texCoords;\n        \n        void main() {\n          texCoords = (position + 1.0) / 2.0;\n          texCoords.y = 1.0 - texCoords.y;\n          gl_Position = vec4(position, 0, 1.0);\n        }\n      `;\n\n    const fragShaderSource = `\n        precision highp float;\n        varying vec2 texCoords;\n        uniform sampler2D textureSampler;\n        \n        void main() {\n          float brightness = ${this.calculateBrightness(brightness)};\n          vec4 color = texture2D(textureSampler, texCoords);\n          color.rgb += brightness;\n          gl_FragColor = color;\n        }\n      `;\n\n    const vertShader = gl.createShader(gl.VERTEX_SHADER);\n    const fragShader = gl.createShader(gl.FRAGMENT_SHADER);\n\n    gl.shaderSource(vertShader, vertShaderSource);\n    gl.shaderSource(fragShader, fragShaderSource);\n\n    gl.compileShader(vertShader);\n    gl.compileShader(fragShader);\n\n    const program = gl.createProgram();\n\n    gl.attachShader(program, vertShader);\n    gl.attachShader(program, fragShader);\n\n    gl.linkProgram(program);\n\n    gl.useProgram(program);\n\n    /** Magic\n     * set rectange\n     */\n    const vertices = new Float32Array([\n      -1,\n      -1,\n      -1,\n      1,\n      1,\n      1,\n      -1,\n      -1,\n      1,\n      1,\n      1,\n      -1\n    ]);\n\n    const vertexBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n\n    const positionLocation = gl.getAttribLocation(program, \"position\");\n\n    gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);\n    gl.enableVertexAttribArray(positionLocation);\n    /** Magic end */\n\n    const draw = () => {\n      requestAnimationFrame(() => {\n        const texture = gl.createTexture();\n\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n\n        gl.texImage2D(\n          gl.TEXTURE_2D,\n          0,\n          gl.RGBA,\n          gl.RGBA,\n          gl.UNSIGNED_BYTE,\n          this.video\n        );\n\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n        gl.drawArrays(gl.TRIANGLES, 0, 6);\n\n        if (!this.stopVideo) {\n          draw();\n        } else {\n          this.stopVideo = false;\n        }\n      });\n    };\n\n    draw();\n  }\n}\n\nexport default WebglVideo;\n","class CameraWidget {\n  constructor() {\n    this.template = document.getElementById(\"widget-camera-template\");\n  }\n\n  render() {\n    return this.template.content.cloneNode(true);\n  }\n}\n\nexport default CameraWidget;","class PlayerWidget {\n  constructor({ data }) {\n    this.template = document.getElementById(\"widget-player-template\");\n    this.data = data;\n    this.widget = this.template.content.cloneNode(true);\n  }\n\n  setInnerText(selector, text) {\n    const block = this.widget.querySelector(selector);\n\n    if (block) {\n      block.innerText = text;\n    }\n  }\n\n  setCover() {\n    const block = this.widget.querySelector(\".player-now__cover\");\n\n    block.setAttribute(\"src\", this.data.albumcover);\n  }\n\n  render() {\n    this.setCover();\n\n    this.setInnerText(\n      \".player-now__title\",\n      `${this.data.artist} ${this.data.track.name}`\n    );\n\n    this.setInnerText(\".player-progress__time\", this.data.track.length);\n    this.setInnerText(\".player-volume__percentage\", `${this.data.volume}%`);\n\n    return this.widget;\n  }\n}\n\nexport default PlayerWidget;","class QuestionsWidget {\n  constructor({ data }) {\n    this.template = document.getElementById(\"widget-questions-template\");\n    this.data = data;\n    this.widget = this.template.content.cloneNode(true);\n  }\n\n  setInnerText(selector, text) {\n    const block = this.widget.querySelector(selector);\n\n    if (block) {\n      block.innerText = text;\n    }\n  }\n\n  render() {\n    this.setInnerText(\".button_type-yellow\", this.data.buttons[0]);\n    this.setInnerText(\".button_type-grey\", this.data.buttons[1]);\n\n    return this.widget;\n  }\n}\n\nexport default QuestionsWidget;","class StatsWidget {\n  constructor() {\n    this.template = document.getElementById(\"widget-stats-template\");\n  }\n\n  render() {\n    return this.template.content.cloneNode(true);\n  }\n}\n\nexport default StatsWidget;","class ThemalWidget {\n  constructor({ data }) {\n    this.template = document.getElementById(\"widget-thermal-template\");\n    this.data = data;\n    this.widget = this.template.content.cloneNode(true);\n  }\n\n  setInnerText(selector, text) {\n    const block = this.widget.querySelector(selector);\n\n    if (block) {\n      block.innerText = text;\n    }\n  }\n\n  render() {\n    this.setInnerText(\n      \".widget-sensor_type-temp .widget-sensor__value\",\n      `${this.data.temperature}C`\n    );\n\n    this.setInnerText(\n      \".widget-sensor_type-humidity .widget-sensor__value\",\n      `${this.data.humidity}%`\n    );\n\n    return this.widget;\n  }\n}\n\nexport default ThemalWidget;","import StatsWidget from \"./stats.widget\";\nimport CameraWidget from \"./camera.widget\";\nimport QuestionsWidget from \"./questions.widget\";\nimport ThemalWidget from \"./themal.widget\"\nimport PlayerWidget from \"./player.widget\";\n\nconst WIDGET_TYPES = {\n  STATS: \"STATS\",\n  CAMERA: \"CAMERA\",\n  THERMAL: \"THERMAL\",\n  PLAYER: \"PLAYER\",\n  QUESTIONS: \"QUESTIONS\",\n  DEFAULT: \"DEFAULT\"\n};\n\nclass Widget {\n  constructor({ event, container }) {\n    this.event = event;\n    this.container = container;\n    this.template = document.getElementById(\"widget-template\");\n    this.widget = null;\n\n    this.render();\n  }\n\n  setDescription() {\n    if (this.event.description) {\n      this.widget\n        .querySelector(\".widget-content__text\")\n        .classList.add(`widget-content__text_width-${this.event.size}`);\n\n      this.widget.querySelector(\n        \".widget-content__text\"\n      ).innerText = this.event.description;\n    }\n  }\n\n  setHeaderData() {\n    this.widget.querySelector(\n      \".widget-header-about__title\"\n    ).innerText = this.event.title;\n\n    this.widget.querySelector(\n      \".widget-header__type\"\n    ).innerText = this.event.source;\n\n    this.widget.querySelector(\n      \".widget-header__date\"\n    ).innerText = this.event.time;\n\n    this.widget\n      .querySelector(\".widget-header-about__icon > use\")\n      .setAttribute(\"xlink:href\", `#${this.event.icon}`);\n\n    this.widget\n      .querySelector(\".widget-header-about__icon\")\n      .classList.add(`icon_${this.event.icon}`);\n  }\n\n  getDataTemplateType() {\n    const { data = {}, icon } = this.event;\n\n    if (data.type === \"graph\") {\n      return WIDGET_TYPES.STATS;\n    }\n\n    if (icon === \"cam\") {\n      return WIDGET_TYPES.CAMERA;\n    }\n\n    if (data.temperature) {\n      return WIDGET_TYPES.THERMAL;\n    }\n\n    if (data.albumcover) {\n      return WIDGET_TYPES.PLAYER;\n    }\n\n    if (data.buttons) {\n      return WIDGET_TYPES.QUESTIONS;\n    }\n\n    return WIDGET_TYPES.DEFAULT;\n  }\n\n  renderDataTemplate() {\n    const templateDataType = this.getDataTemplateType();\n    let dataContentBlock = null;\n\n    switch (templateDataType) {\n      case WIDGET_TYPES.STATS:\n        const statsWidget = new StatsWidget({\n          data: this.event.data\n        });\n\n        dataContentBlock = statsWidget.render();\n\n        break;\n\n      case WIDGET_TYPES.CAMERA:\n        const cameraWidget = new CameraWidget({\n          data: this.event.data\n        });\n\n        dataContentBlock = cameraWidget.render();\n\n        break;\n\n      case WIDGET_TYPES.PLAYER:\n        const playerWidget = new PlayerWidget({\n          data: this.event.data\n        });\n\n        dataContentBlock = playerWidget.render();\n\n        break;\n\n      case WIDGET_TYPES.QUESTIONS:\n        const questionsWidget = new QuestionsWidget({\n          data: this.event.data\n        });\n\n        dataContentBlock = questionsWidget.render();\n\n        break;\n\n      case WIDGET_TYPES.THERMAL:\n        const thermalWidget = new ThemalWidget({\n          data: this.event.data\n        });\n\n        dataContentBlock = thermalWidget.render();\n\n        break;\n    }\n\n    if (dataContentBlock) {\n      this.widget\n        .querySelector(\".widget-content\")\n        .appendChild(dataContentBlock);\n    }\n  }\n\n  render() {\n    this.widget = this.template.content\n      .querySelector(\".widget\")\n      .cloneNode(true);\n\n    this.widget.classList.add(`widget_size-${this.event.size}`);\n    this.widget.classList.add(`widget_type-${this.event.type}`);\n\n    this.setHeaderData();\n    this.setDescription();\n    this.renderDataTemplate();\n\n    this.container.appendChild(this.widget);\n  }\n}\n\nexport default Widget;","class ApplicationLayout {\n  constructor(selector) {\n    this.layout = document.querySelector(selector);\n  }\n\n  block() {\n    this.layout.classList.add(\"application_state-frozen\");\n    this.layout.classList.add(\"application_state-blured\");\n  }\n\n  unblock() {\n    this.layout.classList.remove(\"application_state-frozen\");\n    this.layout.classList.remove(\"application_state-blured\");\n  }\n}\n\nconst Layout = new ApplicationLayout(\"#application\");\n\nexport default Layout;\n","import layout from \"../layout/layout\";\nimport HeaderNavigation from \"../components/header/header\";\n\nimport IndexPage from \"./index.page\";\nimport VideocontrolPage from \"./videocontrol.page\";\n\nclass InitApplication {\n  constructor() {\n    this.currentPage = window.location.pathname;\n\n    this.init();\n  }\n\n  routing() {\n    switch (this.currentPage) {\n      case \"/\":\n        this.page = new IndexPage();\n        break;\n\n      case \"/videocontrol.html\":\n        this.page = new VideocontrolPage();\n        break;\n    }\n  }\n\n  init() {\n    this.headerNavigation = new HeaderNavigation({\n      selector: \"#header-menu\",\n      layout\n    });\n\n    this.routing();\n  }\n}\n\nnew InitApplication();","import Widget from \"../components/widget/widget\";\n\nclass IndexPage {\n  constructor() {\n    this.init();\n  }\n\n  renderDashboardWidgets(events) {\n    const dashboardWidgetsList = document.getElementById(\"dashboard-list\");\n\n    events.forEach(event => {\n      new Widget({\n        event,\n        container: dashboardWidgetsList\n      });\n    });\n  }\n\n  loadEvents() {\n    return fetch(\"http://localhost:8000/api/events\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        type: \"critical:info\",\n        offset: 0,\n        limit: 20\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    })\n      .then(response => response.json())\n      .then(result => result)\n      .catch(err => alert(err));\n  }\n\n  init() {\n    this.loadEvents().then(events => {\n      this.renderDashboardWidgets(events);\n    });\n  }\n}\n\nexport default IndexPage;","\nimport Videocontrol from \"../components/videocontrol/videocontrol\";\n\nclass VideoControlPage {\n  constructor() {\n    this.broadcasts = [\n      {\n        url:\n          \"http://localhost:9191/master?url=http%3A%2F%2Flocalhost%3A3102%2Fstreams%2Fsosed%2Fmaster.m3u8\"\n      },\n      {\n        url:\n          \"http://localhost:9191/master?url=http%3A%2F%2Flocalhost%3A3102%2Fstreams%2Fcat%2Fmaster.m3u8\"\n      },\n      {\n        url:\n          \"http://localhost:9191/master?url=http%3A%2F%2Flocalhost%3A3102%2Fstreams%2Fdog%2Fmaster.m3u8\"\n      },\n      {\n        url:\n          \"http://localhost:9191/master?url=http%3A%2F%2Flocalhost%3A3102%2Fstreams%2Fhall%2Fmaster.m3u8\"\n      }\n    ];\n\n    this.init();\n  }\n\n  init() {\n    const VideocontrolWidget = new Videocontrol({\n      broadcasts: this.broadcasts,\n      element: document.getElementById(\"vc-list\"),\n      elementShowAll: document.getElementById(\"vc-showall\")\n    });\n  }\n}\n\nexport default VideoControlPage;"],"sourceRoot":""}